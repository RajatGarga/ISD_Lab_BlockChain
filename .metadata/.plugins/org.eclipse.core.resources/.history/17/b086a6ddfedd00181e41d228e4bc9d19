package tests;

import java.security.KeyPair;

import BlockChain.Block;
import BlockChain.Constants;
import BlockChain.Transaction;
import utils.Crypto;

public class blockHashTest {
	public static void main(String[] args) {
		KeyPair keys = Crypto.generateKeys();
		Transaction trans = new Transaction("Owner", "Receiver", 10, "id");
		trans.sign(Crypto.getPrivateKeyasString(keys));
		Block block = new Block("timestamp", "previousHash");
		block.addTransaction(trans.toJSON());
		String hash = block.hashBlock();
		while(!test(hash, block.nonce)) {
			block.incNonce();
			hash = block.hashBlock();
		}
		System.out.println("mined hash : " + hash);
	}
	
	public static boolean test(String hash, int nonce) {
		String subs = hash.substring(0, 21);
		System.out.println(nonce +" " + subs);
		if(subs.matches("000000000000000000000")) {
			return true;
		}else {
			return false;
		}
	}
}
